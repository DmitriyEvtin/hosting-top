# GitHub Actions Workflows

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö GitHub Actions workflows –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ P.

## üöÄ –¢–µ–∫—É—â–∏–µ workflows

### 1. `ci.yml` - –î–µ–ø–ª–æ–π Frontend

**–¢–µ–∫—É—â–∏–π workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ –≤–µ—Ç–∫—É master
- ‚úÖ Docker —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ Push –æ–±—Ä–∞–∑–∞ –≤ registry
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**

```yaml
on:
  push:
    branches: [master]
```

**–®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **Checkout –∫–æ–¥–∞** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞
2. **Docker build** - —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ —Å —Ç–µ–≥–æ–º `master-1`
3. **Docker push** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ registry

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:**

- `REGISTRY_URL` - URL Docker registry
- `IMAGE_NAME` - –∏–º—è –æ–±—Ä–∞–∑–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏

**–ö–æ–º–∞–Ω–¥—ã Makefile:**

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
make build

# –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ registry
make push
```

**–ó–∞–ø—É—Å–∫:**

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ push –≤ master
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ GitHub Secrets
```

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é CI/CD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:

- **–ï–¥–∏–Ω—ã–π workflow** - —Ç–æ–ª—å–∫–æ `ci.yml` –¥–ª—è –¥–µ–ø–ª–æ—è
- **Docker-based –¥–µ–ø–ª–æ–π** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- **Makefile –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è
- **Registry-based** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ Docker registry

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –§–æ–∫—É—Å –Ω–∞ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ - –¥–µ–ø–ª–æ–π frontend
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ master

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### GitHub Secrets

–¢—Ä–µ–±—É–µ–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã workflow:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã
REGISTRY_URL    # URL Docker registry (–Ω–∞–ø—Ä–∏–º–µ—Ä: registry.example.com)
IMAGE_NAME      # –ò–º—è –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: parket-crm-frontend)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Makefile

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Makefile –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

```makefile
# –ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥ –≤ Makefile
build:
	docker build -t $(REGISTRY)/$(IMAGE_NAME):$(TAG) .

push:
	docker push $(REGISTRY)/$(IMAGE_NAME):$(TAG)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Registry

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Docker registry
2. –î–æ–±–∞–≤—å—Ç–µ credentials –≤ GitHub Secrets
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ registry –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ GitHub Actions

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è

### –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è

- **GitHub Actions UI** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ

### –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è** - –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –¥–µ–ø–ª–æ–µ–≤
- **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞** - —Ä–∞–∑–º–µ—Ä Docker –æ–±—Ä–∞–∑–∞

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**
   - Unit —Ç–µ—Å—Ç—ã
   - –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
   - TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –æ–±—Ä–∞–∑–µ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - Health checks –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ

4. **–û—Ç–∫–∞—Ç:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ workflow

```yaml
name: Enhanced Deploy
on:
  push:
    branches: [master]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run tests
        run: npm test
      - name: Lint code
        run: npm run lint

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Build and push
        run: |
          REGISTRY=${{ secrets.REGISTRY_URL }} \
          IMAGE_NAME=${{ secrets.IMAGE_NAME }} \
          TAG=master-1 \
          make build && make push
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [FSD Architecture Rules](https://feature-sliced.design/)
- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)
- [Security Best Practices](https://docs.github.com/en/code-security)
