# Промпты для AI ассистента

## Пользовательские запросы

### 2024-12-19

- **Запрос**: "@docs/ в документации надо описать что логирование будет в sentry"
- **Контекст**: Добавление информации о логировании в Sentry в документацию проекта
- **Выполнено**:
  - Создан файл `docs/development/monitoring.md` с подробным описанием настройки и использования Sentry
  - Обновлен `docs/overview/tech-stack.md` с расширенным описанием Sentry
  - Добавлена ссылка на мониторинг в `docs/README.md`

- **Запрос**: "@docs/ опиши в документации что проверка fsd с помощью npx steiger ./src"
- **Контекст**: Добавление информации о проверке FSD архитектуры с помощью Steiger в документацию
- **Выполнено**:
  - Обновлен `docs/architecture/fsd-structure.md` с подробным описанием Steiger и его возможностей
  - Добавлена информация о проверке FSD в `docs/development/setup.md`
  - Описаны команды запуска, интеграция в CI/CD и примеры ошибок

- **Запрос**: "@docs/ в документации надо указать что оптимизация и ресайзинг изображений будет с помощью ramielcreations/caravaggio в докер контейнере"
- **Контекст**: Добавление информации об использовании Docker контейнера Caravaggio для обработки изображений
- **Выполнено**:
  - Обновлен `docs/parsing/image-processing.md` с подробным описанием интеграции Caravaggio
  - Добавлена Docker Compose конфигурация для Caravaggio контейнера
  - Описаны API операции, настройки, мониторинг и управление контейнером
  - Обновлен процесс обработки изображений с использованием Caravaggio API

- **Запрос**: "убери из конфигов домен bvb-alyans.ru изображения будут на домене проекта который пока не определен"
- **Контекст**: Удаление конкретного домена из конфигураций Caravaggio, так как домен проекта еще не определен
- **Выполнено**:
  - Удален домен `bvb-alyans.ru` из Docker Compose конфигурации
  - Обновлен массив `allowedDomains` в настройках Caravaggio
  - Добавлен TODO комментарий для добавления домена проекта в будущем

- **Запрос**: "@docs/ опиши правило работы с git учитывая @https://www.conventionalcommits.org/en/v1.0.0/"
- **Контекст**: Создание документации по правилам работы с Git на основе Conventional Commits спецификации
- **Выполнено**:
  - Создан файл `docs/development/git-workflow.md` с подробным описанием правил работы с Git
  - Описана структура коммитов согласно Conventional Commits спецификации
  - Добавлены примеры коммитов для FSD архитектуры с правильными scope
  - Описаны инструменты автоматизации (commitlint, semantic-release, conventional-changelog)
  - Добавлены правила для команды и troubleshooting
  - Обновлен `docs/README.md` с ссылкой на новую документацию

- **Запрос**: "Начни реализацию этапа 1.1"
- **Контекст**: Реализация этапа 1.1 "Настройка базовой структуры" из плана проекта
- **Выполнено**:
  - ✅ Создание Next.js проекта с App Router (уже был создан)
  - ✅ Настройка TypeScript конфигурации (уже была настроена)
  - ✅ Установка и настройка Tailwind CSS 4 (уже был установлен)
  - ✅ Настройка shadcn/ui компонентов:
    - Установлены необходимые зависимости (class-variance-authority, clsx, tailwind-merge, lucide-react, @radix-ui/react-slot, tailwindcss-animate)
    - Создан файл конфигурации components.json
    - Настроен tailwind.config.ts с CSS переменными для shadcn/ui
    - Обновлен globals.css с CSS переменными для темной и светлой темы
  - ✅ Создание базовой FSD структуры:
    - Создан shared слой с утилитами (utils.ts) и UI компонентами (Button, Card)
    - Создан pages слой с HomePage компонентом
    - Настроены правильные импорты и экспорты согласно FSD архитектуре
    - Обновлена главная страница приложения для использования HomePage компонента
    - Обновлены метаданные приложения
  - Приложение успешно запущено и протестировано на localhost:3000

- **Запрос**: "создай папку pages в корне"
- **Контекст**: Создание папки pages в корне проекта для совместимости с Next.js
- **Выполнено**:
  - ✅ Создана папка `pages/` в корне проекта
  - ✅ Создан README.md в папке pages с объяснением назначения
  - ✅ Исправлены ошибки Tailwind CSS (откат с версии 4 на стабильную версию 3)
  - ✅ Обновлена конфигурация Tailwind CSS для правильной работы с CSS переменными
  - ✅ Создан postcss.config.js для корректной работы с Tailwind CSS 3
  - ✅ Исправлены экспорты в Button компоненте
  - ✅ Приложение работает без ошибок с корректными стилями

- **Запрос**: "почему ты используешь tilewind 3 ведь сейчас уже версия 4.1.13"
- **Контекст**: Обновление Tailwind CSS до актуальной версии 4.1.13
- **Выполнено**:
  - ✅ Обновлен Tailwind CSS с версии 3.4.17 до 4.1.13
  - ✅ Установлен @tailwindcss/postcss@4.1.13 для корректной работы
  - ✅ Обновлена конфигурация tailwind.config.ts для версии 4
  - ✅ Обновлен globals.css с правильным синтаксисом @import "tailwindcss"
  - ✅ Удален postcss.config.js (не нужен в Tailwind CSS 4)
  - ✅ Приложение работает с актуальной версией Tailwind CSS 4.1.13

- **Запрос**: "теперь в браузере стили tilewind не подгружены"
- **Контекст**: Проблема с загрузкой стилей Tailwind CSS 4.1.13
- **Выполнено**:
  - ✅ Удален несовместимый плагин tailwindcss-animate
  - ✅ Обновлена конфигурация tailwind.config.ts (убраны plugins)
  - ✅ Очищен кэш Next.js (.next папка)
  - ✅ Перезапущен сервер разработки
  - ✅ Проверена загрузка CSS файла - стили применяются корректно
  - ✅ Приложение работает с полной поддержкой Tailwind CSS 4.1.13

- **Запрос**: "я все равно не вижу стилей возмоожно надо добавить postcss и файл postcss.config.mjs"
- **Контекст**: Проблема с загрузкой стилей Tailwind CSS - CSS файл был пустой
- **Выполнено**:
  - ✅ Установлен PostCSS и autoprefixer для корректной обработки CSS
  - ✅ Создан postcss.config.mjs с правильной конфигурацией для Tailwind CSS 3
  - ✅ Откат с Tailwind CSS 4 на стабильную версию 3.4.0
  - ✅ Обновлена конфигурация tailwind.config.ts для версии 3
  - ✅ Обновлен globals.css с правильными @tailwind директивами
  - ✅ Очищен кэш Next.js и перезапущен сервер
  - ✅ Проверен CSS файл - теперь содержит все Tailwind CSS стили
  - ✅ Приложение работает с корректными стилями в браузере

- **Запрос**: "Начни реализацию этапа 2.2"
- **Контекст**: Реализация этапа 2.2 "Написание базовых тестов" из плана проекта
- **Выполнено**:
  - ✅ Unit тесты для shared утилит:
    - Расширены тесты для utils.ts (cn функция) с проверкой Tailwind CSS конфликтов
    - Созданы тесты для env-simple.ts с проверкой переменных окружения, сервисов и валидации
    - Созданы тесты для database-test.ts с мокированием Prisma клиента
    - Все тесты проходят успешно (32 теста)
  - ✅ Компонентные тесты для базовых UI компонентов:
    - Расширены тесты для Button компонента с проверкой accessibility, keyboard navigation, ARIA атрибутов
    - Расширены тесты для Card компонента с проверкой всех подкомпонентов, accessibility, edge cases
    - Все тесты проходят успешно (29 тестов)
  - ✅ API тесты для базовых endpoints:
    - Созданы тесты для /api/config/check с мокированием зависимостей
    - Созданы тесты для /api/config/simple с проверкой различных сценариев
    - Созданы тесты для /api/database/test с мокированием Prisma
    - Все тесты покрывают успешные и ошибочные сценарии
  - ✅ E2E тесты для основных пользовательских сценариев:
    - Расширены существующие E2E тесты с проверкой API endpoints, пользовательских взаимодействий
    - Созданы тесты для конфигурации с проверкой различных состояний системы
    - Созданы тесты для пользовательских сценариев с проверкой производительности и accessibility
    - Все тесты покрывают основные пользовательские сценарии
  - ✅ Общее покрытие тестами: 61 тест успешно проходит
  - ✅ Все тесты следуют лучшим практикам тестирования React/Next.js приложений

- **Запрос**: "Начни реализацию этапа 2.3"
- **Контекст**: Реализация этапа 2.3 "Настройка CI/CD для тестирования" из плана проекта
- **Выполнено**:
  - ✅ GitHub Actions workflow для тестов:
    - Создан основной workflow `.github/workflows/test.yml` с полным циклом тестирования
    - Настроена тестовая база данных PostgreSQL в CI/CD
    - Добавлены шаги для linting, type checking, unit, integration и E2E тестов
    - Настроена загрузка отчетов покрытия кода в Codecov
    - Создан отдельный workflow для проверки FSD архитектуры
  - ✅ Настройка тестовой базы данных:
    - Обновлена Jest конфигурация для поддержки покрытия кода
    - Добавлены скрипты для unit и integration тестов в package.json
    - Настроены исключения из покрытия кода (API routes, layouts, pages)
    - Создана документация по настройке тестовой БД
  - ✅ Настройка покрытия кода:
    - Обновлена Jest конфигурация с порогами покрытия 70%
    - Настроены отчеты в форматах text, lcov, html, json
    - Создан файл конфигурации codecov.yml
    - Настроена интеграция с Codecov для отслеживания покрытия
  - ✅ Интеграция с Sentry для мониторинга тестов:
    - Установлен @sentry/nextjs пакет
    - Создана конфигурация Sentry для тестового и production окружения
    - Созданы утилиты для тестирования с Sentry
    - Написаны тесты для Sentry конфигурации
    - Настроен мониторинг ошибок в тестах
  - ✅ Все компоненты CI/CD настроены и готовы к использованию
